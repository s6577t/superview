;
(function(a){Superview=function(){Events(this).define("onResized","onMoved","onSubviewAdded","onSubviewRemoved","onParentViewSet","onRemoved"),extend(this).with({hasViewMixin:!0,_controller:null,_parentView:null,_subviews:{},_uuid:uuid(),_zElem:z.div().css({overflow:"hidden",display:"inline-block",position:"absolute",left:0,right:0})})},Superview.prototype={setController:function(a){this._controller=a;return this},getController:function(){return this._controller},uuid:function(){return this._uuid},elem:function(){return this._zElem.elem()},z:function(){return this._zElem},addSubview:function(a){this.z().append(a.elem()),a.setParentView(this),this._subviews[a.uuid()]=a,this.onSubviewAdded().emit(a,this);return this},addSubviews:function(){var b=a.isArray(arguments[0])?arguments[0]:Array.toArray(arguments),c=this;b.forEach(function(a){c.addSubview(a)});return this},isRootView:function(){return!this.getParentView()},getRootView:function(){var a=this;while(!a.isRootView())a=a.getParentView();return a},setParentView:function(a){if(!a)return this.remove();if(this._parentView)throw"parent view already set";a._subviews[this.uuid()]=this,this._parentView=a,this.onParentViewSet().emit(this,a);return this},getParentView:function(){return this._parentView},removeSubviews:function(){var b=a.isArray(arguments[0])?arguments[0]:Array.toArray(arguments),c=this;b.forEach(function(a){c.removeSubview(a)});return this},removeSubview:function(a){a.remove();return this},remove:function(){this.z().remove();var a=this._parentView;this._parentView=null,this.onRemoved().emit(this,a||null),a&&(delete a._subviews[this.uuid()],a.onSubviewRemoved().emit(this,a)),this.removeAllSubviews();return this},removeAllSubviews:function(){return this.removeSubviews(this.subviews())},subviews:function(){return Object.values(this._subviews)},borderMetrics:function(){var a=this,b=this.z(),c={top:parseFloat(b.css("borderTopWidth"))||0,right:parseFloat(b.css("borderRightWidth"))||0,bottom:parseFloat(b.css("borderBottomWidth"))||0,left:parseFloat(b.css("borderLeftWidth"))||0};c.width=c.right+c.left,c.height=c.top+c.bottom;return c},paddingMetrics:function(){var a=this,b=this.z(),c={top:parseFloat(b.css("paddingTop"))||0,right:parseFloat(b.css("paddingRight"))||0,bottom:parseFloat(b.css("paddingBottom"))||0,left:parseFloat(b.css("paddingLeft"))||0};c.width=c.right+c.left,c.height=c.top+c.bottom;return c},setSize:function(a){var b=!1,c=this.z(),d=this.getRect();Superview.Rect.hasWidth(a)&&a.width!=d.width&&(b=!0,d.width=a.width,c.css("width",d.width)),Superview.Rect.hasHeight(a)&&a.height!=d.height&&(b=!0,d.height=a.height,c.css("height",d.height)),b&&this.onResized().emit(this,d,this.getOuterRect());return this},setOuterSize:function(a){var b=this.z();Superview.Rect.hasWidth(a)&&(a.width=a.width-(this.paddingMetrics().width+this.borderMetrics().width)),Superview.Rect.hasHeight(a)&&(a.height=a.height-(this.paddingMetrics().height+this.borderMetrics().height));return this.setSize(a)},moveTo:function(a){var b=!1,c=this.z(),d=this.getRect();typeof a.top=="number"&&a.top!=d.top&&(b=!0,d.top=a.top+this.paddingMetrics().top+this.borderMetrics().top,c.css("top",d.top)),typeof a.left=="number"&&a.left!=d.left&&(b=!0,d.left=a.left+this.paddingMetrics().left+this.borderMetrics().left,c.css("left",d.left)),b&&this.onMoved().emit(this,d,this.getOuterRect());return this},moveOuterTo:function(a){var b=this.z();typeof a.top=="number"&&(a.top=a.top-(this.paddingMetrics().top+this.borderMetrics().top)),typeof a.left=="number"&&(a.left=a.left-(this.paddingMetrics().left+this.borderMetrics().left));return this.moveTo(a)},getRect:function(){var a=this.z(),b={left:parseFloat(a.css("left")),top:parseFloat(a.css("top"))},c={top:b.top+this.paddingMetrics().top+this.borderMetrics().top,left:b.left+this.paddingMetrics().left+this.borderMetrics().left,width:a.width(),height:a.height()};c.right=c.left+c.width,c.bottom=c.top+c.height;return c},getOuterRect:function(){var a=this.z(),b={left:parseFloat(a.css("left")),top:parseFloat(a.css("top"))},c={top:b.top,left:b.left,width:a.outerWidth(),height:a.outerHeight()};c.right=c.left+c.width,c.bottom=c.top+c.height;return c}}})(jQuery)
;
;
(function(){Superview.Rect={hasHeight:function(a){return a&&typeof a.height=="number"},hasWidth:function(a){return a&&typeof a.width=="number"},hasTop:function(a){return a&&typeof a.top=="number"},hasLeft:function(a){return a&&typeof a.left=="number"},samePosition:function(){var a=arguments,b=a[0];for(var c=1;c<a.length;c++){var d=a[c];if(d.top!==b.top&&d.left!==b.left)return!1}return!0},sameSize:function(){var a=arguments,b=a[0];for(var c=1;c<a.length;c++){var d=a[c];if(d.width!==b.width&&d.height!==b.height)return!1}return!0},areEqual:function(){var a=arguments,b=a[0];for(var c=1;c<a.length;c++){var d=a[c];if(d.top!==b.top&&d.left!==b.left&&d.width!==b.width&&d.height!==b.height)return!1}return!0}}})()
;
