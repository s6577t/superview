<script type="text/javascript" charset="utf-8">
  
  var BindToSibling = function () {
    extend(this).mixin(Superview.Page);
  }
  
  BindToSibling.prototype = {
    render: function () {
      var container = new Superview().render().addTo(this);
      container.z().css({
        backgroundColor: '#3020FF'
      });
      container.bind = function () {
        var self = this;
        this.bindToParent({
          width: function (parent) {
            return parent.rect().width - 30
          },
          height: function (parent) {
            return parent.rect().height - 30
          },
          left: function (parent) {
            return (parent.rect().width / 2.0) - ((parent.rect().width - 30) / 2.0)
          },
          top: function (parent) {
            return (parent.rect().height / 2.0) - ((parent.rect().height - 30) / 2.0)
          }
        })
      }
      this._container = container;
      
      var box = new Superview().render().addTo(container);
      box.resize({width: 200, height: 200}).moveTo({top: 30, left: 50});
      box.z().css({
        backgroundColor: 'yellow'
      })
      box.draggable();
      
      var box2 = new Superview().render().addTo(container);
      box2.z().css({
        backgroundColor: 'pink'
      })
      box2.bind = function () {
        this.bindTo(box, {
          top: true,
          left: 'right',
          width: true,
          height: true
        })
      }
      
      // for positional testing
      window.yellowBox = box;
      this._box = box;
      return this
    },
    bind: function () {
      return this.fitWindow();
    }
  }
  
  jQuery(function () {
    new BindToSibling().initialize();
  })
</script>